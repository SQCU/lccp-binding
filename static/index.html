<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logit Loom Client</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>Logit Loom Client</h1>
        
        <!-- Tab Navigation -->
        <div class="tab-nav">
            <button id="tab-btn-multi-stream" class="tab-btn active">Multi-Stream Generator</button>
            <button id="tab-btn-ngram" class="tab-btn">Context Slice Explorer</button>
        </div>

        <!-- Tab Content Panes -->
        <div class="tab-content">

            <!-- Pane 1: Multi-Stream Generator (Our existing UI) -->
            <div id="pane-multi-stream" class="tab-pane active">
                <p>Generate multiple, parallel text streams from chained prompts.</p>
                <div class="input-area">
                    <div id="prompts-container">
                        <textarea id="main-prompt" class="prompt-input" rows="4" placeholder="Enter your primary prompt here..."></textarea>
                    </div>
                    <div class="controls">
                        <button id="half-ctx-btn">+ Half Context</button>
                        <button id="generate-btn">Generate All Streams</button>
                    </div>
                </div>
                <div id="streams-container"></div>
            </div>

            <!-- Pane 2: Context Slice Logit Explorer (The new UI) -->
            <div id="pane-ngram" class="tab-pane">
                <p>
                    Input a phrase to see how the model's next-token predictions change as its context is reduced.
                    This helps reveal the model's "short-sighted" choices.
                </p>
                <div class="input-area">
                     <textarea id="ngram-input" class="prompt-input" rows="5" placeholder="Type a word or phrase..."></textarea>
                     <div class="controls">
                         <button id="ngram-probe-btn">Probe Context Slices</button>
                    </div>
                </div>
                
                <!-- ⭐ NEW: Filter Controls ⭐ -->
                <div id="filter-controls" class="filter-controls-container">
                    <h3>Filter Controls</h3>
                    <div class="slider-group">
                        <label for="top-k-slider" id="top-k-label">Top-K: 1000</label>
                        <input type="range" id="top-k-slider" min="1" max="1000" value="1000">
                    </div>
                    <div class="slider-group">
                        <label for="top-p-slider" id="top-p-label">Top-P: 1.00</label>
                        <input type="range" id="top-p-slider" min="0.01" max="1.0" value="1.0" step="0.01">
                    </div>
                    <div class="slider-group">
                        <label for="min-p-slider" id="min-p-label">Min-P: 0.00%</label>
                        <input type="range" id="min-p-slider" min="0" max="0.1" value="0" step="0.0001">
                    </div>
                </div>

                <div id="ngram-results-container">
                    <!-- Results will be rendered here -->
                </div>
            </div>

        </div>
    </div>
    <script src="/static/main.js"></script>
</body>
</html>